-- ===== 1. åˆå§‹åŒ– + Ohioç»•è¿‡ï¼ˆç¡®ä¿å¯ç”¨ï¼‰=====
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local devv = require(ReplicatedStorage.devv)
local Signal = devv.load("Signal")

-- ç­‰å¾…è§’è‰²åŠ è½½
repeat task.wait() until LocalPlayer.Character
local Character = LocalPlayer.Character
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- è§’è‰²é‡ç”Ÿå¤„ç†
LocalPlayer.CharacterAdded:Connect(function(char)
    repeat task.wait() until char and char.Parent
    Character = char
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart", 10)
    Humanoid = char:WaitForChild("Humanoid", 10)
end)

-- ===== ç»•è¿‡åŠŸèƒ½ï¼ˆå¼ºåˆ¶å¼€å¯ï¼‰=====
-- åå¸ƒå¨ƒå¨ƒ
task.spawn(function()
    while task.wait(0.5) do
        pcall(function()
            Signal.FireServer("setRagdoll", false)
        end)
    end
end)

-- ååä¸‹
task.spawn(function()
    LocalPlayer.CharacterAdded:Connect(function(char)
        task.wait(0.5)
        pcall(function()
            local hum = char:FindFirstChild("Humanoid")
            if hum then hum.Sit = false end
        end)
    end)
    pcall(function()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.Sit = false
        end
    end)
end)

-- é˜²å°ç¦
task.spawn(function()
    local gc = getgc(true)
    for _, v in ipairs(gc) do
        if type(v) == "table" then
            pcall(function()
                if rawget(v, "shadowbanned") ~= nil then rawset(v, "shadowbanned", nil) end
                if rawget(v, "numshadowbans") ~= nil then rawset(v, "numshadowbans", 0) end
            end)
        end
    end
end)

-- ===== UIåº“ï¼ˆç¡®ä¿åŠ è½½ï¼‰=====
local library = loadstring(game:HttpGet("https://pastefy.app/ud7GghOq/raw", true))()
local window = library:new("ğŸŒ Banana Track | Ohio")

-- ===== ä¸»èœå• =====
local main = window:Tab("é¦™è•‰è¿½è¸ª")
local section = main:section("ğŸŒ é¦™è•‰çš®å…‰ç¯", true)

local BananaAura = false
local TrackSpeed = 15
local TrackRange = 190

-- å¼€å…³
section:Toggle("å¼€å¯é¦™è•‰è¿½è¸ª", false, function(v)
    BananaAura = v
    bladeaura = v
end)

-- é€Ÿåº¦æ»‘å—
section:Slider("æŠ•æ·é€Ÿåº¦", 5, 30, 15, function(v)
    TrackSpeed = v
end)

-- èŒƒå›´æ»‘å—
section:Slider("è¿½è¸ªèŒƒå›´", 50, 300, 190, function(v)
    TrackRange = v
end)

section:Label("æ•ˆæœï¼šå³æ‰‹ â†’ æ•Œäººèº«ä½“ä¸­å¿ƒ")
section:Label("å®æ—¶è¿½è¸ªæ•Œäººä½ç½®")

-- ===== åŠ è½½è¿œç¨‹æ¨¡å— =====
local load = require(ReplicatedStorage.devv).load
local Signal = load("Signal")
local FireServer = Signal.FireServer
local InvokeServer = Signal.InvokeServer
local GUID = load("GUID")
local v3item = load("v3item")
local Raycast = load("Raycast")
local inventory = v3item.inventory

-- ===== é¦™è•‰çš®æŠ•æ·æ ¸å¿ƒ =====
local hackthrow = function(plr, itemname, itemguid, velocity, epos)
    if plr ~= LocalPlayer then return end
    task.spawn(function()
        local success, stickyId = pcall(InvokeServer, "throwSticky", GUID(), itemname, itemguid, velocity, epos)
        if not success or not stickyId then return end
        
        -- å°„çº¿æ£€æµ‹
        local rayParams = RaycastParams.new()
        rayParams.FilterType = Enum.RaycastFilterType.Blacklist
        rayParams.FilterDescendantsInstances = {plr.Character, workspace.Game.Local, workspace.Game.Drones}
        
        local dist = (epos - plr.Character.Head.Position).Magnitude
        local rayResult = workspace:Raycast(
            plr.Character.Head.Position,
            (epos - plr.Character.Head.Position).Unit * (dist + 5),
            rayParams
        )
        
        if rayResult and rayResult.Instance then
            pcall(InvokeServer, "hitSticky", stickyId, rayResult.Instance, 
                rayResult.Instance.CFrame:ToObjectSpace(CFrame.new(rayResult.Position, rayResult.Position + rayResult.Normal)),
                CFrame.new(rayResult.Position)
            )
        end
    end)
end

-- ===== è·å–èƒŒåŒ…ç‰©å“ =====
local getinventory = function()
    return inventory and inventory.items or {}
end

local finditem = function(name)
    for guid, data in pairs(getinventory()) do
        if data and data.name == name then
            return data
        end
    end
end

-- ===== è‡ªåŠ¨è´­ä¹°é¦™è•‰çš® =====
local function buyBanana()
    pcall(function()
        InvokeServer("attemptPurchase", "Banana Peel")
        InvokeServer("attemptPurchaseAmmo", "Banana Peel")
    end)
end

-- ===== é¦™è•‰çš®è¿½è¸ªå…‰ç¯ =====
local currentTarget = nil
local lastThrow = 0
local cooldown = 0.2

local function throwBanana(plr)
    if not plr or not plr.Character then return end
    
    local item = finditem("Banana Peel")
    if not item then
        buyBanana()
        return
    end
    
    -- è£…å¤‡
    pcall(FireServer, "equip", item.guid)
    
    -- è·å–ä½ç½®
    local targetRoot = plr.Character:FindFirstChild("HumanoidRootPart")
    local rightHand = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("RightHand")
    
    if not targetRoot or not rightHand then return end
    
    -- å³æ‰‹ â†’ æ•Œäººèº«ä½“ä¸­å¿ƒ
    local spos = rightHand.Position
    local epos = targetRoot.Position
    
    -- è®¡ç®—é€Ÿåº¦
    local direction = (epos - spos).Unit
    local distance = (spos - epos).Magnitude
    local velocity = direction * (distance * TrackSpeed / 5)
    
    -- è´­ä¹°å¼¹è¯å¹¶æŠ•æ·
    pcall(InvokeServer, "attemptPurchaseAmmo", "Banana Peel")
    hackthrow(LocalPlayer, "Banana Peel", item.guid, velocity, epos)
end

-- ===== ä¸»å¾ªç¯ =====
RunService.Heartbeat:Connect(function()
    if not BananaAura or not HumanoidRootPart or not LocalPlayer.Character then return end
    
    local now = tick()
    if now - lastThrow < cooldown then return end
    
    -- æ”»å‡»å½“å‰ç›®æ ‡
    if currentTarget then
        local char = currentTarget.Character
        if char then
            local hum = char:FindFirstChildOfClass("Humanoid")
            local head = char:FindFirstChild("Head")
            
            if hum and hum.Health > 0 and head then
                local dist = (HumanoidRootPart.Position - head.Position).Magnitude
                if dist < TrackRange then
                    throwBanana(currentTarget)
                    lastThrow = now
                    return
                end
            end
        end
    end
    
    -- å¯»æ‰¾æ–°ç›®æ ‡
    currentTarget = nil
    local closestDist = TrackRange
    local closestPlayer = nil
    
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character then
            local hum = plr.Character:FindFirstChildOfClass("Humanoid")
            local head = plr.Character:FindFirstChild("Head")
            
            if hum and hum.Health > 0 and head then
                local dist = (HumanoidRootPart.Position - head.Position).Magnitude
                if dist < closestDist then
                    closestDist = dist
                    closestPlayer = plr
                end
            end
        end
    end
    
    if closestPlayer then
        currentTarget = closestPlayer
        throwBanana(closestPlayer)
     